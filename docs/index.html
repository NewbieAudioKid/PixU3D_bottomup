<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PixelFlow - Documentation</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&family=Noto+Sans+JP:wght@300;400;500;600&family=Noto+Sans+SC:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-main: #f8fafc;
            --bg-sidebar: #ffffff;
            --bg-card: #ffffff;
            --bg-code: #f1f5f9;
            --border: #e2e8f0;
            --border-hover: #cbd5e1;
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-muted: #94a3b8;
            --accent: #6366f1;
            --accent-light: #818cf8;
            --accent-bg: #eef2ff;
            --accent-border: #c7d2fe;
            --success: #10b981;
            --success-bg: #ecfdf5;
            --warning: #f59e0b;
            --danger: #ef4444;
            --danger-bg: #fef2f2;
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.04);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.05);
            --shadow-lg: 0 8px 24px rgba(0,0,0,0.08);
            --radius: 12px;
            --radius-sm: 8px;
            --sidebar-width: 280px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', 'Noto Sans SC', 'Noto Sans JP', sans-serif;
            background: var(--bg-main);
            color: var(--text-primary);
            line-height: 1.7;
            font-size: 15px;
            min-height: 100vh;
        }

        body.lang-zh { font-family: 'Noto Sans SC', 'Inter', sans-serif; }
        body.lang-ja { font-family: 'Noto Sans JP', 'Inter', sans-serif; }

        /* Layout */
        .layout {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--bg-sidebar);
            border-right: 1px solid var(--border);
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            overflow-y: auto;
            z-index: 100;
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 24px;
            border-bottom: 1px solid var(--border);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            width: 42px;
            height: 42px;
            background: linear-gradient(135deg, var(--accent) 0%, #8b5cf6 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 18px;
            color: white;
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }

        .logo-text {
            font-size: 22px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .lang-switcher {
            display: flex;
            gap: 4px;
            margin-top: 16px;
            background: var(--bg-main);
            border-radius: 10px;
            padding: 4px;
        }

        .lang-btn {
            flex: 1;
            padding: 8px 12px;
            border: none;
            background: transparent;
            color: var(--text-muted);
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s ease;
        }

        .lang-btn:hover {
            color: var(--text-primary);
            background: var(--bg-card);
        }

        .lang-btn.active {
            background: var(--accent);
            color: white;
            box-shadow: 0 2px 8px rgba(99, 102, 241, 0.25);
        }

        /* Sidebar Navigation */
        .sidebar-nav {
            flex: 1;
            padding: 16px 12px;
            overflow-y: auto;
        }

        .nav-section {
            margin-bottom: 24px;
        }

        .nav-section-title {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            padding: 8px 12px;
        }

        .nav-link {
            display: block;
            padding: 10px 12px;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            border-radius: 8px;
            transition: all 0.15s ease;
            margin-bottom: 2px;
        }

        .nav-link:hover {
            background: var(--bg-main);
            color: var(--text-primary);
        }

        .nav-link.active {
            background: var(--accent-bg);
            color: var(--accent);
        }

        /* Main Content */
        .main {
            flex: 1;
            margin-left: var(--sidebar-width);
            min-width: 0;
        }

        .content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 48px 64px;
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 80px 40px;
            background: linear-gradient(135deg, var(--accent-bg) 0%, #faf5ff 50%, #fef3c7 100%);
            border-radius: 24px;
            margin-bottom: 48px;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 30% 50%, rgba(99, 102, 241, 0.08) 0%, transparent 50%),
                        radial-gradient(circle at 70% 80%, rgba(245, 158, 11, 0.06) 0%, transparent 40%);
            pointer-events: none;
        }

        .hero h1 {
            font-size: clamp(42px, 6vw, 64px);
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--text-primary);
            letter-spacing: -1.5px;
            position: relative;
        }

        .hero-subtitle {
            font-size: 18px;
            color: var(--text-secondary);
            max-width: 560px;
            margin: 0 auto 32px;
            font-weight: 400;
            position: relative;
        }

        .hero-badges {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
            position: relative;
        }

        .badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            font-size: 13px;
            color: var(--text-secondary);
            box-shadow: var(--shadow-sm);
        }

        .badge-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--success);
        }

        /* Section */
        .section {
            margin-bottom: 48px;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid var(--border);
        }

        .section-number {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--accent) 0%, #8b5cf6 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 15px;
            color: white;
            flex-shrink: 0;
        }

        .section-title {
            font-size: 24px;
            font-weight: 600;
            letter-spacing: -0.3px;
            color: var(--text-primary);
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            overflow: hidden;
            margin-bottom: 12px;
            transition: all 0.2s ease;
            box-shadow: var(--shadow-sm);
        }

        .card:hover {
            border-color: var(--border-hover);
            box-shadow: var(--shadow-md);
        }

        .card-header {
            padding: 18px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: background 0.15s ease;
        }

        .card-header:hover {
            background: var(--bg-main);
        }

        .card-title-group {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        .card-title {
            font-weight: 600;
            font-size: 15px;
            color: var(--text-primary);
        }

        .card-path {
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            color: var(--text-muted);
            background: var(--bg-code);
            padding: 4px 10px;
            border-radius: 6px;
        }

        .card-toggle {
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-main);
            border-radius: 6px;
            color: var(--text-muted);
            transition: all 0.2s ease;
            font-size: 12px;
        }

        .card.open .card-toggle {
            transform: rotate(180deg);
            color: var(--accent);
            background: var(--accent-bg);
        }

        .card-body {
            display: none;
            padding: 0 24px 24px;
            border-top: 1px solid var(--border);
        }

        .card.open .card-body {
            display: block;
            padding-top: 20px;
        }

        /* Tags */
        .tag {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .tag-singleton { background: var(--success-bg); color: var(--success); }
        .tag-component { background: #eff6ff; color: #3b82f6; }
        .tag-ui { background: #fdf2f8; color: #ec4899; }
        .tag-editor { background: #f5f3ff; color: #8b5cf6; }
        .tag-data { background: #fffbeb; color: #d97706; }

        /* Tables */
        .table-wrapper {
            overflow-x: auto;
            margin: 16px 0;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }

        th {
            text-align: left;
            padding: 12px 16px;
            background: var(--bg-main);
            color: var(--text-muted);
            font-weight: 500;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 1px solid var(--border);
        }

        td {
            padding: 12px 16px;
            border-bottom: 1px solid var(--border);
        }

        tr:last-child td {
            border-bottom: none;
        }

        td:first-child {
            font-family: 'JetBrains Mono', monospace;
            color: var(--accent);
            font-size: 13px;
        }

        /* Code Blocks */
        pre {
            background: var(--bg-code);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            padding: 20px;
            overflow-x: auto;
            margin: 16px 0;
        }

        code {
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
        }

        .inline-code {
            background: var(--bg-code);
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 13px;
            border: 1px solid var(--border);
        }

        /* Method List */
        .method-list {
            list-style: none;
        }

        .method-item {
            padding: 14px 0;
            border-bottom: 1px solid var(--border);
        }

        .method-item:last-child {
            border-bottom: none;
        }

        .method-name {
            font-family: 'JetBrains Mono', monospace;
            color: var(--accent);
            font-size: 14px;
            font-weight: 500;
        }

        .method-desc {
            color: var(--text-secondary);
            font-size: 13px;
            margin-top: 6px;
        }

        /* Hierarchy Tree */
        .hierarchy {
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
            line-height: 2;
            background: var(--bg-code);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            padding: 20px;
            overflow-x: auto;
        }

        .h-indent { color: var(--border-hover); }
        .h-name { color: var(--text-primary); }
        .h-comment { color: var(--text-muted); font-family: 'Inter', sans-serif; font-size: 12px; }

        /* Flow Diagram */
        .flow {
            background: var(--bg-code);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            padding: 24px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            line-height: 1.8;
            overflow-x: auto;
            white-space: pre;
            color: var(--text-secondary);
        }

        /* Grid Layout */
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }

        /* Subsection */
        .subsection-title {
            font-size: 17px;
            font-weight: 600;
            margin: 32px 0 16px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border);
            color: var(--text-primary);
        }

        /* Info Box */
        .info-box {
            background: var(--accent-bg);
            border: 1px solid var(--accent-border);
            border-radius: var(--radius-sm);
            padding: 16px 20px;
            margin: 16px 0;
        }

        .info-box h4 {
            color: var(--accent);
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .info-box p {
            color: var(--text-secondary);
            font-size: 14px;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 32px 24px;
            border-top: 1px solid var(--border);
            color: var(--text-muted);
            font-size: 13px;
            background: var(--bg-card);
        }

        .footer a {
            color: var(--accent);
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        /* Language specific */
        [data-lang] { display: none; }
        [data-lang="en"] { display: block; }
        
        body.lang-zh [data-lang] { display: none; }
        body.lang-zh [data-lang="zh"] { display: block; }
        
        body.lang-ja [data-lang] { display: none; }
        body.lang-ja [data-lang="ja"] { display: block; }

        /* Responsive */
        @media (max-width: 1024px) {
            .grid-3 {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .main {
                margin-left: 0;
            }
            
            .content {
                padding: 24px;
            }
            
            .hero {
                padding: 48px 24px;
            }
            
            .grid-2, .grid-3 {
                grid-template-columns: 1fr;
            }
            
            .card-title-group {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
        }

        /* Wide screen optimization */
        @media (min-width: 1600px) {
            .content {
                max-width: 1400px;
                padding: 64px 80px;
            }
            
            .grid-2 {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }
            
            .grid-3 {
                grid-template-columns: repeat(3, 1fr);
                gap: 20px;
            }
        }

        @media (min-width: 1920px) {
            :root {
                --sidebar-width: 320px;
            }
            
            .content {
                max-width: 1600px;
            }
        }
    </style>
</head>
<body>
    <div class="layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">P</div>
                    <span class="logo-text">PixelFlow</span>
                </div>
                <div class="lang-switcher">
                    <button class="lang-btn active" onclick="setLang('en')">EN</button>
                    <button class="lang-btn" onclick="setLang('zh')">中文</button>
                    <button class="lang-btn" onclick="setLang('ja')">日本語</button>
                </div>
            </div>
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title" data-lang="en">Getting Started</div>
                    <div class="nav-section-title" data-lang="zh">开始使用</div>
                    <div class="nav-section-title" data-lang="ja">はじめに</div>
                    <a href="#overview" class="nav-link active" data-lang="en">Overview</a>
                    <a href="#overview" class="nav-link active" data-lang="zh">概述</a>
                    <a href="#overview" class="nav-link active" data-lang="ja">概要</a>
                    <a href="#scenes" class="nav-link" data-lang="en">Scenes</a>
                    <a href="#scenes" class="nav-link" data-lang="zh">场景</a>
                    <a href="#scenes" class="nav-link" data-lang="ja">シーン</a>
                    <a href="#hierarchy" class="nav-link" data-lang="en">Hierarchy</a>
                    <a href="#hierarchy" class="nav-link" data-lang="zh">层级结构</a>
                    <a href="#hierarchy" class="nav-link" data-lang="ja">ヒエラルキー</a>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title" data-lang="en">Scripts</div>
                    <div class="nav-section-title" data-lang="zh">脚本</div>
                    <div class="nav-section-title" data-lang="ja">スクリプト</div>
                    <a href="#scripts" class="nav-link" data-lang="en">Core Systems</a>
                    <a href="#scripts" class="nav-link" data-lang="zh">核心系统</a>
                    <a href="#scripts" class="nav-link" data-lang="ja">コアシステム</a>
                    <a href="#dataflow" class="nav-link" data-lang="en">Data Flow</a>
                    <a href="#dataflow" class="nav-link" data-lang="zh">数据流</a>
                    <a href="#dataflow" class="nav-link" data-lang="ja">データフロー</a>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main">
            <div class="content">
                <!-- Hero Section -->
                <section class="hero">
                    <h1>PixelFlow</h1>
                    <p class="hero-subtitle" data-lang="en">A 2D puzzle shooter where colored shooters patrol a conveyor belt, automatically firing at matching cells.</p>
                    <p class="hero-subtitle" data-lang="zh">一款2D益智射击游戏，彩色射手在传送带上巡逻，自动射击匹配颜色的方块。</p>
                    <p class="hero-subtitle" data-lang="ja">色付きシューターがコンベアベルトを巡回し、一致するセルに自動的に発射する2Dパズルシューティングゲーム。</p>
                    <div class="hero-badges">
                        <span class="badge"><span class="badge-dot"></span> Unity 2021.3+</span>
                        <span class="badge">C# / MonoBehaviour</span>
                        <span class="badge">MIT License</span>
                    </div>
                </section>

                <!-- Section 1: Overview -->
                <section class="section" id="overview">
                    <div class="section-header">
                        <div class="section-number">1</div>
                        <h2 class="section-title" data-lang="en">Overview</h2>
                        <h2 class="section-title" data-lang="zh">概述</h2>
                        <h2 class="section-title" data-lang="ja">概要</h2>
                    </div>

                    <div class="card open">
                        <div class="card-header" onclick="toggleCard(this)">
                            <div class="card-title-group">
                                <span class="card-title" data-lang="en">Core Mechanics</span>
                                <span class="card-title" data-lang="zh">核心玩法</span>
                                <span class="card-title" data-lang="ja">コアメカニクス</span>
                            </div>
                            <div class="card-toggle">&#9660;</div>
                        </div>
                        <div class="card-body">
                            <div data-lang="en">
                                <ul style="color: var(--text-secondary); padding-left: 20px; line-height: 2;">
                                    <li><strong>Select Shooters</strong> - Click shooters from the table to move them to the ready queue (5 slots max)</li>
                                    <li><strong>Deploy to Belt</strong> - Click a queued shooter to start conveyor belt patrol</li>
                                    <li><strong>Auto-Fire</strong> - Shooters automatically fire at cells matching their color</li>
                                    <li><strong>Win Condition</strong> - Clear all cells from the grid</li>
                                    <li><strong>Lose Condition</strong> - Ready queue is full when a shooter returns from patrol</li>
                                </ul>
                                <div class="info-box">
                                    <h4>Last Stand Mechanic</h4>
                                    <p>When both table and queue are empty, the current shooter triggers "Last Stand" mode with 2x speed, automatically re-entering the belt until ammo depletes.</p>
                                </div>
                            </div>
                            <div data-lang="zh">
                                <ul style="color: var(--text-secondary); padding-left: 20px; line-height: 2;">
                                    <li><strong>选择射手</strong> - 点击备战台上的射手，移动到准备队列（最多5个位置）</li>
                                    <li><strong>部署到传送带</strong> - 点击队列中的射手，开始传送带巡逻</li>
                                    <li><strong>自动射击</strong> - 射手自动射击颜色匹配的方块</li>
                                    <li><strong>胜利条件</strong> - 清除网格中的所有方块</li>
                                    <li><strong>失败条件</strong> - 射手返回时准备队列已满</li>
                                </ul>
                                <div class="info-box">
                                    <h4>绝地反击机制</h4>
                                    <p>当备战台和队列都为空时，当前射手触发"绝地反击"模式，获得2倍速度加成，自动重新进入传送带直到弹药耗尽。</p>
                                </div>
                            </div>
                            <div data-lang="ja">
                                <ul style="color: var(--text-secondary); padding-left: 20px; line-height: 2;">
                                    <li><strong>シューター選択</strong> - テーブルからシューターをクリックして待機キューに移動（最大5スロット）</li>
                                    <li><strong>ベルトへ配置</strong> - キュー内のシューターをクリックしてコンベアベルトパトロールを開始</li>
                                    <li><strong>自動発射</strong> - シューターは同じ色のセルに自動的に発射</li>
                                    <li><strong>勝利条件</strong> - グリッドからすべてのセルをクリア</li>
                                    <li><strong>敗北条件</strong> - シューターが戻ったとき待機キューが満杯</li>
                                </ul>
                                <div class="info-box">
                                    <h4>ラストスタンドメカニクス</h4>
                                    <p>テーブルとキューの両方が空のとき、現在のシューターは「ラストスタンド」モードを発動し、2倍の速度でベルトに自動的に再突入します。</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Section 2: Scenes -->
                <section class="section" id="scenes">
                    <div class="section-header">
                        <div class="section-number">2</div>
                        <h2 class="section-title" data-lang="en">Scene Structure</h2>
                        <h2 class="section-title" data-lang="zh">场景结构</h2>
                        <h2 class="section-title" data-lang="ja">シーン構造</h2>
                    </div>

                    <div class="grid-3">
                        <div class="card">
                            <div class="card-header" onclick="toggleCard(this)">
                                <div class="card-title-group">
                                    <span class="card-title">SplashScene</span>
                                </div>
                                <div class="card-toggle">&#9660;</div>
                            </div>
                            <div class="card-body">
                                <p data-lang="en" style="color: var(--text-secondary); font-size: 14px;">Initial loading screen with brand logo display and fade transition.</p>
                                <p data-lang="zh" style="color: var(--text-secondary); font-size: 14px;">初始加载界面，展示品牌Logo并淡出过渡。</p>
                                <p data-lang="ja" style="color: var(--text-secondary); font-size: 14px;">ブランドロゴを表示し、フェードトランジションする初期ロード画面。</p>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header" onclick="toggleCard(this)">
                                <div class="card-title-group">
                                    <span class="card-title">MenuScene</span>
                                </div>
                                <div class="card-toggle">&#9660;</div>
                            </div>
                            <div class="card-body">
                                <p data-lang="en" style="color: var(--text-secondary); font-size: 14px;">Main menu with level selection. Initializes GameManager singleton.</p>
                                <p data-lang="zh" style="color: var(--text-secondary); font-size: 14px;">主菜单，包含关卡选择。初始化 GameManager 单例。</p>
                                <p data-lang="ja" style="color: var(--text-secondary); font-size: 14px;">レベル選択を含むメインメニュー。GameManagerシングルトンを初期化。</p>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header" onclick="toggleCard(this)">
                                <div class="card-title-group">
                                    <span class="card-title">GameScene</span>
                                </div>
                                <div class="card-toggle">&#9660;</div>
                            </div>
                            <div class="card-body">
                                <p data-lang="en" style="color: var(--text-secondary); font-size: 14px;">Main gameplay with 20x20 grid, shooters, and conveyor belt.</p>
                                <p data-lang="zh" style="color: var(--text-secondary); font-size: 14px;">主游戏场景，包含20x20网格、射手和传送带。</p>
                                <p data-lang="ja" style="color: var(--text-secondary); font-size: 14px;">20x20グリッド、シューター、コンベアベルトを含むメインゲームプレイシーン。</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Section 3: Hierarchy -->
                <section class="section" id="hierarchy">
                    <div class="section-header">
                        <div class="section-number">3</div>
                        <h2 class="section-title" data-lang="en">Hierarchy</h2>
                        <h2 class="section-title" data-lang="zh">层级结构</h2>
                        <h2 class="section-title" data-lang="ja">ヒエラルキー</h2>
                    </div>

                    <div class="card open">
                        <div class="card-header" onclick="toggleCard(this)">
                            <div class="card-title-group">
                                <span class="card-title" data-lang="en">GameScene Hierarchy</span>
                                <span class="card-title" data-lang="zh">游戏场景层级</span>
                                <span class="card-title" data-lang="ja">ゲームシーンヒエラルキー</span>
                            </div>
                            <div class="card-toggle">&#9660;</div>
                        </div>
                        <div class="card-body">
                            <div class="hierarchy">
<span class="h-name">GameScene</span>
<span class="h-indent">|--</span> <span class="h-name">Main Camera</span>
<span class="h-indent">|--</span> <span class="h-name">GameManager</span> <span class="h-comment">// Singleton, DontDestroyOnLoad</span>
<span class="h-indent">|--</span> <span class="h-name">GameRoot</span>
<span class="h-indent">|   |--</span> <span class="h-name">GridManager</span> <span class="h-comment">// 20x20 grid</span>
<span class="h-indent">|   |   |--</span> <span class="h-name">Pixel_Cell (x400)</span>
<span class="h-indent">|   |--</span> <span class="h-name">BeltPathHolder</span> <span class="h-comment">// 4 waypoints</span>
<span class="h-indent">|   |--</span> <span class="h-name">ReadyQueueManager</span> <span class="h-comment">// 5 slots</span>
<span class="h-indent">|   |--</span> <span class="h-name">ShooterTableManager</span> <span class="h-comment">// 5x6 grid</span>
<span class="h-indent">|--</span> <span class="h-name">Canvas</span>
<span class="h-indent">    |--</span> <span class="h-name">Top</span> <span class="h-comment">// Level display</span>
<span class="h-indent">    |--</span> <span class="h-name">Popup_GameResult</span> <span class="h-comment">// Victory/GameOver</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Section 4: Scripts -->
                <section class="section" id="scripts">
                    <div class="section-header">
                        <div class="section-number">4</div>
                        <h2 class="section-title" data-lang="en">Script Reference</h2>
                        <h2 class="section-title" data-lang="zh">脚本参考</h2>
                        <h2 class="section-title" data-lang="ja">スクリプトリファレンス</h2>
                    </div>

                    <h3 class="subsection-title" data-lang="en">Core Systems</h3>
                    <h3 class="subsection-title" data-lang="zh">核心系统</h3>
                    <h3 class="subsection-title" data-lang="ja">コアシステム</h3>

                    <div class="grid-2">
                        <!-- GameManager -->
                        <div class="card">
                            <div class="card-header" onclick="toggleCard(this)">
                                <div class="card-title-group">
                                    <span class="tag tag-singleton">Singleton</span>
                                    <span class="card-title">GameManager</span>
                                </div>
                                <div class="card-toggle">&#9660;</div>
                            </div>
                            <div class="card-body">
                                <p class="card-path" style="margin-bottom: 12px;">Scripts/GameManager.cs</p>
                                <p data-lang="en" style="color: var(--text-secondary); font-size: 14px;">Global game state manager. Persists across scenes via DontDestroyOnLoad.</p>
                                <p data-lang="zh" style="color: var(--text-secondary); font-size: 14px;">全局游戏状态管理器，通过 DontDestroyOnLoad 跨场景持久化。</p>
                                <p data-lang="ja" style="color: var(--text-secondary); font-size: 14px;">DontDestroyOnLoadでシーン間で永続化するグローバルゲームステートマネージャー。</p>
                                
                                <ul class="method-list" style="margin-top: 16px;">
                                    <li class="method-item">
                                        <span class="method-name">StartLevel(string)</span>
                                        <div class="method-desc" data-lang="en">Sets currentLevelName and loads GameScene.</div>
                                        <div class="method-desc" data-lang="zh">设置当前关卡名并加载游戏场景。</div>
                                        <div class="method-desc" data-lang="ja">currentLevelNameを設定し、GameSceneをロード。</div>
                                    </li>
                                    <li class="method-item">
                                        <span class="method-name">GameOver(bool isWin)</span>
                                        <div class="method-desc" data-lang="en">Triggers victory or game over popup.</div>
                                        <div class="method-desc" data-lang="zh">触发胜利或游戏结束弹窗。</div>
                                        <div class="method-desc" data-lang="ja">勝利またはゲームオーバーポップアップをトリガー。</div>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <!-- GridManager -->
                        <div class="card">
                            <div class="card-header" onclick="toggleCard(this)">
                                <div class="card-title-group">
                                    <span class="tag tag-singleton">Singleton</span>
                                    <span class="card-title">GridManager</span>
                                </div>
                                <div class="card-toggle">&#9660;</div>
                            </div>
                            <div class="card-body">
                                <p class="card-path" style="margin-bottom: 12px;">Scripts/GameScene/GridManager.cs</p>
                                <p data-lang="en" style="color: var(--text-secondary); font-size: 14px;">Manages 20x20 cell grid generation, smart target lookup, and win detection.</p>
                                <p data-lang="zh" style="color: var(--text-secondary); font-size: 14px;">管理20x20方块网格生成、智能目标查找和胜利检测。</p>
                                <p data-lang="ja" style="color: var(--text-secondary); font-size: 14px;">20x20セルグリッドの生成、スマートターゲット検索、勝利検出を管理。</p>
                                
                                <ul class="method-list" style="margin-top: 16px;">
                                    <li class="method-item">
                                        <span class="method-name">GetTargetCellSmart(Vector3)</span>
                                        <div class="method-desc" data-lang="en">Smart zone-based target lookup based on shooter position.</div>
                                        <div class="method-desc" data-lang="zh">智能分区目标查找，根据射手位置确定扫描方向。</div>
                                        <div class="method-desc" data-lang="ja">シューターの位置に基づいてスマートゾーンベースのターゲット検索。</div>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <!-- PigController -->
                        <div class="card">
                            <div class="card-header" onclick="toggleCard(this)">
                                <div class="card-title-group">
                                    <span class="tag tag-component">Component</span>
                                    <span class="card-title">PigController</span>
                                </div>
                                <div class="card-toggle">&#9660;</div>
                            </div>
                            <div class="card-body">
                                <p class="card-path" style="margin-bottom: 12px;">Scripts/GameScene/PigController.cs</p>
                                <p data-lang="en" style="color: var(--text-secondary); font-size: 14px;">Core shooter controller with state machine and pre-calculated shot scheduling.</p>
                                <p data-lang="zh" style="color: var(--text-secondary); font-size: 14px;">核心射手控制器，包含状态机和预计算射击排程。</p>
                                <p data-lang="ja" style="color: var(--text-secondary); font-size: 14px;">状態マシンと事前計算ショットスケジューリングを持つコアシューターコントローラー。</p>
                                
                                <pre style="margin-top: 16px;"><code>PreCalculatePath():
  for step in 0..79:
    target = GetTargetCellSmart(pos)
    if match: shotSchedule.Enqueue()</code></pre>
                            </div>
                        </div>

                        <!-- ReadyQueueManager -->
                        <div class="card">
                            <div class="card-header" onclick="toggleCard(this)">
                                <div class="card-title-group">
                                    <span class="tag tag-singleton">Singleton</span>
                                    <span class="card-title">ReadyQueueManager</span>
                                </div>
                                <div class="card-toggle">&#9660;</div>
                            </div>
                            <div class="card-body">
                                <p class="card-path" style="margin-bottom: 12px;">Scripts/GameScene/ReadyQueueManager.cs</p>
                                <p data-lang="en" style="color: var(--text-secondary); font-size: 14px;">Manages 5-slot ready queue with auto shift-left on removal.</p>
                                <p data-lang="zh" style="color: var(--text-secondary); font-size: 14px;">管理5个槽位的准备队列，移除时自动左移补位。</p>
                                <p data-lang="ja" style="color: var(--text-secondary); font-size: 14px;">削除時に自動左シフトを持つ5スロット待機キューを管理。</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="subsection-title" data-lang="en">UI Components</h3>
                    <h3 class="subsection-title" data-lang="zh">UI组件</h3>
                    <h3 class="subsection-title" data-lang="ja">UIコンポーネント</h3>

                    <div class="grid-2">
                        <div class="card">
                            <div class="card-header" onclick="toggleCard(this)">
                                <div class="card-title-group">
                                    <span class="tag tag-ui">UI</span>
                                    <span class="card-title">GameResultPopup</span>
                                </div>
                                <div class="card-toggle">&#9660;</div>
                            </div>
                            <div class="card-body">
                                <p data-lang="en" style="color: var(--text-secondary); font-size: 14px;">Victory/GameOver modal with pop animation using AnimationCurve.</p>
                                <p data-lang="zh" style="color: var(--text-secondary); font-size: 14px;">胜利/失败弹窗，使用动画曲线实现弹出效果。</p>
                                <p data-lang="ja" style="color: var(--text-secondary); font-size: 14px;">AnimationCurveを使用したポップアニメーション付き勝利/ゲームオーバーモーダル。</p>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header" onclick="toggleCard(this)">
                                <div class="card-title-group">
                                    <span class="tag tag-ui">UI</span>
                                    <span class="card-title">ElasticButton</span>
                                </div>
                                <div class="card-toggle">&#9660;</div>
                            </div>
                            <div class="card-body">
                                <p data-lang="en" style="color: var(--text-secondary); font-size: 14px;">Q-bounce scale animation on press/release with overshoot curve.</p>
                                <p data-lang="zh" style="color: var(--text-secondary); font-size: 14px;">按下/松开时的Q弹缩放动画，带有过冲曲线效果。</p>
                                <p data-lang="ja" style="color: var(--text-secondary); font-size: 14px;">オーバーシュートカーブを持つプレス/リリース時のQ弾スケールアニメーション。</p>
                            </div>
                        </div>
                    </div>

                    <h3 class="subsection-title" data-lang="en">Editor Tools</h3>
                    <h3 class="subsection-title" data-lang="zh">编辑器工具</h3>
                    <h3 class="subsection-title" data-lang="ja">エディタツール</h3>

                    <div class="card">
                        <div class="card-header" onclick="toggleCard(this)">
                            <div class="card-title-group">
                                <span class="tag tag-editor">Editor</span>
                                <span class="card-title">LevelDataGenerator</span>
                                <span class="card-path">Scripts/Level/LevelDataGenerator.cs</span>
                            </div>
                            <div class="card-toggle">&#9660;</div>
                        </div>
                        <div class="card-body">
                            <p data-lang="en" style="color: var(--text-secondary); margin-bottom: 16px; font-size: 14px;">Editor tool for generating level JSON. Right-click component -> "Generate All 10 Levels".</p>
                            <p data-lang="zh" style="color: var(--text-secondary); margin-bottom: 16px; font-size: 14px;">关卡JSON生成编辑器工具。右键组件 -> "Generate All 10 Levels"。</p>
                            <p data-lang="ja" style="color: var(--text-secondary); margin-bottom: 16px; font-size: 14px;">レベルJSON生成エディタツール。コンポーネントを右クリック -> "Generate All 10 Levels"。</p>
                            
                            <div class="table-wrapper">
                                <table>
                                    <tr><th>Level</th><th>Pattern</th><th>Level</th><th>Pattern</th></tr>
                                    <tr><td>1</td><td>Border + X</td><td>6</td><td>Circles</td></tr>
                                    <tr><td>2</td><td>Concentric</td><td>7</td><td>Diagonal</td></tr>
                                    <tr><td>3</td><td>Checkerboard</td><td>8</td><td>Quadrants</td></tr>
                                    <tr><td>4</td><td>Stripes</td><td>9</td><td>Radial</td></tr>
                                    <tr><td>5</td><td>Spiral</td><td>10</td><td>Maze</td></tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Section 5: Data Flow -->
                <section class="section" id="dataflow">
                    <div class="section-header">
                        <div class="section-number">5</div>
                        <h2 class="section-title" data-lang="en">Data Flow</h2>
                        <h2 class="section-title" data-lang="zh">数据流</h2>
                        <h2 class="section-title" data-lang="ja">データフロー</h2>
                    </div>

                    <div class="grid-2">
                        <div class="card open">
                            <div class="card-header" onclick="toggleCard(this)">
                                <div class="card-title-group">
                                    <span class="card-title" data-lang="en">Shooter Lifecycle</span>
                                    <span class="card-title" data-lang="zh">射手生命周期</span>
                                    <span class="card-title" data-lang="ja">シューターライフサイクル</span>
                                </div>
                                <div class="card-toggle">&#9660;</div>
                            </div>
                            <div class="card-body">
                                <div class="flow">[Click Table]
    v
MoveToQueue()
    v
[Click Queue]
    v
PreCalculatePath()
    v
RunBeltSequence()
    v
[Done] -> ReturnToQueue()
      or -> AutoRejoinBelt(2x)</div>
                            </div>
                        </div>

                        <div class="card open">
                            <div class="card-header" onclick="toggleCard(this)">
                                <div class="card-title-group">
                                    <span class="card-title" data-lang="en">Win/Lose Conditions</span>
                                    <span class="card-title" data-lang="zh">胜负条件</span>
                                    <span class="card-title" data-lang="ja">勝敗条件</span>
                                </div>
                                <div class="card-toggle">&#9660;</div>
                            </div>
                            <div class="card-body">
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                                    <div>
                                        <h4 style="color: var(--success); margin-bottom: 8px; font-size: 13px;" data-lang="en">WIN</h4>
                                        <h4 style="color: var(--success); margin-bottom: 8px; font-size: 13px;" data-lang="zh">胜利</h4>
                                        <h4 style="color: var(--success); margin-bottom: 8px; font-size: 13px;" data-lang="ja">勝利</h4>
                                        <div class="flow" style="font-size: 11px; padding: 12px;">OnCellDestroyed()
if count == 0:
  GameOver(true)</div>
                                    </div>
                                    <div>
                                        <h4 style="color: var(--danger); margin-bottom: 8px; font-size: 13px;" data-lang="en">LOSE</h4>
                                        <h4 style="color: var(--danger); margin-bottom: 8px; font-size: 13px;" data-lang="zh">失败</h4>
                                        <h4 style="color: var(--danger); margin-bottom: 8px; font-size: 13px;" data-lang="ja">敗北</h4>
                                        <div class="flow" style="font-size: 11px; padding: 12px;">ReturnToQueue()
if queue.IsFull():
  GameOver(false)</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <footer class="footer">
                <p data-lang="en">PixelFlow Technical Documentation | <a href="https://github.com/NewbieAudioKid/PixU3D_bottomup">GitHub Repository</a></p>
                <p data-lang="zh">PixelFlow 技术文档 | <a href="https://github.com/NewbieAudioKid/PixU3D_bottomup">GitHub 仓库</a></p>
                <p data-lang="ja">PixelFlow テクニカルドキュメント | <a href="https://github.com/NewbieAudioKid/PixU3D_bottomup">GitHub リポジトリ</a></p>
            </footer>
        </main>
    </div>

    <script>
        function toggleCard(header) {
            header.parentElement.classList.toggle('open');
        }

        function setLang(lang) {
            document.body.className = 'lang-' + lang;
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`.lang-btn[onclick="setLang('${lang}')"]`).classList.add('active');
            localStorage.setItem('pixelflow-lang', lang);
        }

        // Load saved language
        const savedLang = localStorage.getItem('pixelflow-lang');
        if (savedLang) {
            setLang(savedLang);
        }

        // Smooth scroll for nav links
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').slice(1);
                const target = document.getElementById(targetId);
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
                document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                this.classList.add('active');
            });
        });
    </script>
</body>
</html>
