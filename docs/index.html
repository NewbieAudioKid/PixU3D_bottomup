<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PixelFlow - 技术文档</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&family=Noto+Sans+JP:wght@300;400;500&family=Noto+Sans+SC:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-main: #f8fafc;
            --bg-card: #ffffff;
            --bg-code: #f1f5f9;
            --border: #e2e8f0;
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-muted: #94a3b8;
            --accent: #6366f1;
            --accent-light: #818cf8;
            --accent-bg: #eef2ff;
            --success: #10b981;
            --success-bg: #ecfdf5;
            --warning: #f59e0b;
            --danger: #ef4444;
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.04);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.05);
            --radius: 12px;
            --sidebar-width: 280px;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Noto Sans SC', 'Inter', sans-serif;
            background: var(--bg-main);
            color: var(--text-primary);
            line-height: 1.8;
            font-size: 15px;
        }
        body.lang-en { font-family: 'Inter', sans-serif; }
        body.lang-ja { font-family: 'Noto Sans JP', sans-serif; }
        .layout { display: flex; min-height: 100vh; }
        .sidebar {
            width: var(--sidebar-width);
            background: var(--bg-card);
            border-right: 1px solid var(--border);
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            overflow-y: auto;
            z-index: 100;
        }
        .sidebar-header { padding: 24px; border-bottom: 1px solid var(--border); }
        .logo { display: flex; align-items: center; gap: 12px; }
        .logo-icon {
            width: 42px; height: 42px;
            background: linear-gradient(135deg, var(--accent), #8b5cf6);
            border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            font-weight: 700; font-size: 18px; color: white;
        }
        .logo-text { font-size: 22px; font-weight: 700; }
        .lang-switcher {
            display: flex; gap: 4px; margin-top: 16px;
            background: var(--bg-main); border-radius: 10px; padding: 4px;
        }
        .lang-btn {
            flex: 1; padding: 8px 12px; border: none;
            background: transparent; color: var(--text-muted);
            font-size: 13px; font-weight: 500; cursor: pointer; border-radius: 6px;
        }
        .lang-btn:hover { color: var(--text-primary); background: var(--bg-card); }
        .lang-btn.active { background: var(--accent); color: white; }
        .sidebar-nav { padding: 16px 12px; }
        .nav-section { margin-bottom: 24px; }
        .nav-title {
            font-size: 11px; font-weight: 600; color: var(--text-muted);
            text-transform: uppercase; letter-spacing: 0.5px; padding: 8px 12px;
        }
        .nav-link {
            display: block; padding: 10px 12px; color: var(--text-secondary);
            text-decoration: none; font-size: 14px; font-weight: 500;
            border-radius: 8px; margin-bottom: 2px;
        }
        .nav-link:hover { background: var(--bg-main); color: var(--text-primary); }
        .nav-link.active { background: var(--accent-bg); color: var(--accent); }
        .main { flex: 1; margin-left: var(--sidebar-width); }
        .content { max-width: 1200px; margin: 0 auto; padding: 48px 64px; }
        .hero {
            text-align: center; padding: 60px 40px;
            background: linear-gradient(135deg, var(--accent-bg), #faf5ff, #fef3c7);
            border-radius: 24px; margin-bottom: 48px;
        }
        .hero h1 { font-size: 56px; font-weight: 700; margin-bottom: 16px; letter-spacing: -1px; }
        .hero-subtitle { font-size: 18px; color: var(--text-secondary); max-width: 600px; margin: 0 auto 24px; }
        .badges { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; }
        .badge {
            padding: 8px 16px; background: var(--bg-card); border: 1px solid var(--border);
            border-radius: 20px; font-size: 13px; color: var(--text-secondary);
        }
        .section { margin-bottom: 48px; }
        .section-header {
            display: flex; align-items: center; gap: 16px;
            margin-bottom: 24px; padding-bottom: 16px; border-bottom: 2px solid var(--border);
        }
        .section-num {
            width: 36px; height: 36px;
            background: linear-gradient(135deg, var(--accent), #8b5cf6);
            border-radius: 10px; display: flex; align-items: center; justify-content: center;
            font-weight: 600; font-size: 15px; color: white;
        }
        .section-title { font-size: 24px; font-weight: 600; }
        .card {
            background: var(--bg-card); border: 1px solid var(--border);
            border-radius: var(--radius); margin-bottom: 12px; box-shadow: var(--shadow-sm);
        }
        .card:hover { border-color: #cbd5e1; box-shadow: var(--shadow-md); }
        .card-header {
            padding: 18px 24px; display: flex; justify-content: space-between;
            align-items: center; cursor: pointer;
        }
        .card-header:hover { background: var(--bg-main); }
        .card-title-group { display: flex; align-items: center; gap: 12px; flex-wrap: wrap; }
        .card-title { font-weight: 600; font-size: 15px; }
        .card-path {
            font-family: 'JetBrains Mono', monospace; font-size: 12px;
            color: var(--text-muted); background: var(--bg-code);
            padding: 4px 10px; border-radius: 6px;
        }
        .card-toggle {
            width: 28px; height: 28px; display: flex; align-items: center; justify-content: center;
            background: var(--bg-main); border-radius: 6px; color: var(--text-muted); font-size: 12px;
        }
        .card.open .card-toggle { transform: rotate(180deg); color: var(--accent); background: var(--accent-bg); }
        .card-body { display: none; padding: 0 24px 24px; border-top: 1px solid var(--border); }
        .card.open .card-body { display: block; padding-top: 20px; }
        .tag {
            display: inline-block; padding: 4px 10px; border-radius: 6px;
            font-size: 11px; font-weight: 600; text-transform: uppercase;
        }
        .tag-singleton { background: var(--success-bg); color: var(--success); }
        .tag-component { background: #eff6ff; color: #3b82f6; }
        .tag-ui { background: #fdf2f8; color: #ec4899; }
        .tag-editor { background: #f5f3ff; color: #8b5cf6; }
        .tag-data { background: #fffbeb; color: #d97706; }
        table { width: 100%; border-collapse: collapse; font-size: 14px; margin: 16px 0; }
        th {
            text-align: left; padding: 12px 16px; background: var(--bg-main);
            color: var(--text-muted); font-weight: 500; font-size: 12px;
            text-transform: uppercase; border-bottom: 1px solid var(--border);
        }
        td { padding: 12px 16px; border-bottom: 1px solid var(--border); }
        td:first-child { font-family: 'JetBrains Mono', monospace; color: var(--accent); font-size: 13px; }
        pre {
            background: var(--bg-code); border: 1px solid var(--border);
            border-radius: 8px; padding: 20px; overflow-x: auto; margin: 16px 0;
            font-family: 'JetBrains Mono', monospace; font-size: 13px; line-height: 1.6;
            white-space: pre;
        }
        .method-list { list-style: none; }
        .method-item { padding: 14px 0; border-bottom: 1px solid var(--border); }
        .method-item:last-child { border-bottom: none; }
        .method-name { font-family: 'JetBrains Mono', monospace; color: var(--accent); font-size: 14px; font-weight: 500; }
        .method-desc { color: var(--text-secondary); font-size: 13px; margin-top: 6px; }
        .grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; }
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
        .subsection { font-size: 17px; font-weight: 600; margin: 32px 0 16px; padding-bottom: 8px; border-bottom: 1px solid var(--border); }
        .info-box { background: var(--accent-bg); border: 1px solid #c7d2fe; border-radius: 8px; padding: 16px 20px; margin: 16px 0; }
        .info-box h4 { color: var(--accent); font-size: 13px; font-weight: 600; margin-bottom: 8px; }
        .info-box p { color: var(--text-secondary); font-size: 14px; }
        .footer { text-align: center; padding: 32px 24px; border-top: 1px solid var(--border); color: var(--text-muted); font-size: 13px; }
        .footer a { color: var(--accent); text-decoration: none; }
        [data-lang] { display: none; }
        [data-lang="zh"] { display: block; }
        body.lang-en [data-lang] { display: none; }
        body.lang-en [data-lang="en"] { display: block; }
        body.lang-ja [data-lang] { display: none; }
        body.lang-ja [data-lang="ja"] { display: block; }
        @media (max-width: 1024px) { .grid-3 { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 768px) {
            .sidebar { transform: translateX(-100%); }
            .main { margin-left: 0; }
            .content { padding: 24px; }
            .grid-2, .grid-3 { grid-template-columns: 1fr; }
        }
        @media (min-width: 1600px) { .content { max-width: 1400px; } }
        @media (min-width: 1920px) { :root { --sidebar-width: 320px; } .content { max-width: 1600px; } }
    </style>
</head>
<body>
    <div class="layout">
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">P</div>
                    <span class="logo-text">PixelFlow</span>
                </div>
                <div class="lang-switcher">
                    <button class="lang-btn active" onclick="setLang('zh')">中文</button>
                    <button class="lang-btn" onclick="setLang('en')">EN</button>
                    <button class="lang-btn" onclick="setLang('ja')">日本語</button>
                </div>
            </div>
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-title" data-lang="zh">快速开始</div>
                    <div class="nav-title" data-lang="en">Getting Started</div>
                    <div class="nav-title" data-lang="ja">はじめに</div>
                    <a href="#overview" class="nav-link active">Overview</a>
                    <a href="#scenes" class="nav-link">Scenes</a>
                    <a href="#hierarchy" class="nav-link">Hierarchy</a>
                </div>
                <div class="nav-section">
                    <div class="nav-title" data-lang="zh">脚本详解</div>
                    <div class="nav-title" data-lang="en">Scripts</div>
                    <div class="nav-title" data-lang="ja">スクリプト</div>
                    <a href="#core" class="nav-link">Core Systems</a>
                    <a href="#gameplay" class="nav-link">Gameplay</a>
                    <a href="#ui" class="nav-link">UI</a>
                    <a href="#data" class="nav-link">Data</a>
                </div>
            </nav>
        </aside>
        <main class="main">
            <div class="content">
                <!-- Hero -->
                <section class="hero">
                    <h1>PixelFlow</h1>
                    <p class="hero-subtitle" data-lang="zh">一款2D益智射击游戏：彩色射手在传送带上巡逻，自动射击匹配颜色的方块</p>
                    <p class="hero-subtitle" data-lang="en">A 2D puzzle shooter where colored shooters patrol a conveyor belt, firing at matching cells</p>
                    <p class="hero-subtitle" data-lang="ja">コンベアベルトを巡回する色付きシューターが、一致するセルに自動発射する2Dパズルシューティング</p>
                    <div class="badges">
                        <span class="badge">Unity 2021.3+</span>
                        <span class="badge">C# / MonoBehaviour</span>
                        <span class="badge">MIT License</span>
                    </div>
                </section>

                <!-- Section 1: Overview -->
                <section class="section" id="overview">
                    <div class="section-header">
                        <div class="section-num">1</div>
                        <h2 class="section-title" data-lang="zh">核心玩法</h2>
                        <h2 class="section-title" data-lang="en">Core Mechanics</h2>
                        <h2 class="section-title" data-lang="ja">コアメカニクス</h2>
                    </div>
                    <div class="card open">
                        <div class="card-header" onclick="toggleCard(this)">
                            <span class="card-title" data-lang="zh">游戏流程</span>
                            <span class="card-title" data-lang="en">Game Flow</span>
                            <span class="card-title" data-lang="ja">ゲームフロー</span>
                            <div class="card-toggle">&#9660;</div>
                        </div>
                        <div class="card-body">
                            <div data-lang="zh">
                                <ul style="color: var(--text-secondary); padding-left: 20px; line-height: 2.2;">
                                    <li><strong>选择射手</strong> - 点击备战台(ShooterTable)上的射手，移动到准备队列(ReadyQueue)，最多5个槽位</li>
                                    <li><strong>部署到传送带</strong> - 点击队列中的射手，开始传送带(Belt)巡逻</li>
                                    <li><strong>自动射击</strong> - 射手沿传送带移动，自动射击颜色匹配的方块(Cell)</li>
                                    <li><strong>胜利条件</strong> - 清除网格(Grid)中的所有方块</li>
                                    <li><strong>失败条件</strong> - 射手返回时准备队列已满</li>
                                </ul>
                                <div class="info-box">
                                    <h4>绝地反击机制 (Last Stand)</h4>
                                    <p>当备战台和准备队列都为空时，当前射手触发"绝地反击"模式，获得<strong>2倍速度加成</strong>，自动重新进入传送带直到弹药耗尽。这是翻盘的最后机会！</p>
                                </div>
                            </div>
                            <div data-lang="en">
                                <ul style="color: var(--text-secondary); padding-left: 20px; line-height: 2.2;">
                                    <li><strong>Select Shooters</strong> - Click shooters from the table to move them to the ready queue (5 slots max)</li>
                                    <li><strong>Deploy to Belt</strong> - Click a queued shooter to start conveyor belt patrol</li>
                                    <li><strong>Auto-Fire</strong> - Shooters automatically fire at cells matching their color</li>
                                    <li><strong>Win Condition</strong> - Clear all cells from the grid</li>
                                    <li><strong>Lose Condition</strong> - Ready queue is full when a shooter returns from patrol</li>
                                </ul>
                                <div class="info-box">
                                    <h4>Last Stand Mechanic</h4>
                                    <p>When both table and queue are empty, the current shooter triggers "Last Stand" mode with <strong>2x speed bonus</strong>, automatically re-entering the belt until ammo depletes.</p>
                                </div>
                            </div>
                            <div data-lang="ja">
                                <ul style="color: var(--text-secondary); padding-left: 20px; line-height: 2.2;">
                                    <li><strong>シューター選択</strong> - テーブルからシューターをクリックして待機キューに移動（最大5スロット）</li>
                                    <li><strong>ベルトへ配置</strong> - キュー内のシューターをクリックしてベルトパトロールを開始</li>
                                    <li><strong>自動発射</strong> - シューターは同じ色のセルに自動的に発射</li>
                                    <li><strong>勝利条件</strong> - グリッドからすべてのセルをクリア</li>
                                    <li><strong>敗北条件</strong> - シューターが戻ったとき待機キューが満杯</li>
                                </ul>
                                <div class="info-box">
                                    <h4>ラストスタンドメカニクス</h4>
                                    <p>テーブルとキューの両方が空のとき、「ラストスタンド」モードを発動し、<strong>2倍の速度</strong>でベルトに自動再突入します。</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Section 2: Scenes -->
                <section class="section" id="scenes">
                    <div class="section-header">
                        <div class="section-num">2</div>
                        <h2 class="section-title" data-lang="zh">场景结构</h2>
                        <h2 class="section-title" data-lang="en">Scene Structure</h2>
                        <h2 class="section-title" data-lang="ja">シーン構造</h2>
                    </div>
                    <div class="grid-3">
                        <div class="card">
                            <div class="card-header" onclick="toggleCard(this)">
                                <span class="card-title">SplashScene</span>
                                <div class="card-toggle">&#9660;</div>
                            </div>
                            <div class="card-body">
                                <p data-lang="zh" style="color: var(--text-secondary);">启动画面，展示Logo后淡入淡出过渡到MenuScene。<br><br><strong>主要组件：</strong>SplashController, SceneFader</p>
                                <p data-lang="en" style="color: var(--text-secondary);">Splash screen showing logo with fade transition to MenuScene.<br><br><strong>Components:</strong> SplashController, SceneFader</p>
                                <p data-lang="ja" style="color: var(--text-secondary);">ロゴを表示し、MenuSceneへフェードトランジション。<br><br><strong>コンポーネント：</strong>SplashController, SceneFader</p>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header" onclick="toggleCard(this)">
                                <span class="card-title">MenuScene</span>
                                <div class="card-toggle">&#9660;</div>
                            </div>
                            <div class="card-body">
                                <p data-lang="zh" style="color: var(--text-secondary);">主菜单，包含关卡选择和开始按钮。初始化GameManager单例(DontDestroyOnLoad)。<br><br><strong>主要组件：</strong>GameManager, LevelSelectorUI, UI_StartButton</p>
                                <p data-lang="en" style="color: var(--text-secondary);">Main menu with level selection. Initializes GameManager singleton (DontDestroyOnLoad).<br><br><strong>Components:</strong> GameManager, LevelSelectorUI, UI_StartButton</p>
                                <p data-lang="ja" style="color: var(--text-secondary);">レベル選択を含むメインメニュー。GameManagerシングルトンを初期化。<br><br><strong>コンポーネント：</strong>GameManager, LevelSelectorUI, UI_StartButton</p>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header" onclick="toggleCard(this)">
                                <span class="card-title">GameScene</span>
                                <div class="card-toggle">&#9660;</div>
                            </div>
                            <div class="card-body">
                                <p data-lang="zh" style="color: var(--text-secondary);">主游戏场景，包含20x20网格、射手系统、传送带和结果弹窗。<br><br><strong>主要组件：</strong>GridManager, ShooterTableManager, ReadyQueueManager, BeltPathHolder, GameResultPopup</p>
                                <p data-lang="en" style="color: var(--text-secondary);">Main gameplay with 20x20 grid, shooters, conveyor belt, and result popup.<br><br><strong>Components:</strong> GridManager, ShooterTableManager, ReadyQueueManager, BeltPathHolder, GameResultPopup</p>
                                <p data-lang="ja" style="color: var(--text-secondary);">20x20グリッド、シューター、コンベアベルト、結果ポップアップを含むゲームプレイ。<br><br><strong>コンポーネント：</strong>GridManager, ShooterTableManager, ReadyQueueManager, BeltPathHolder, GameResultPopup</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Section 3: Hierarchy -->
                <section class="section" id="hierarchy">
                    <div class="section-header">
                        <div class="section-num">3</div>
                        <h2 class="section-title" data-lang="zh">层级结构</h2>
                        <h2 class="section-title" data-lang="en">Hierarchy</h2>
                        <h2 class="section-title" data-lang="ja">ヒエラルキー</h2>
                    </div>
                    <div class="card open">
                        <div class="card-header" onclick="toggleCard(this)">
                            <span class="card-title" data-lang="zh">GameScene 层级树</span>
                            <span class="card-title" data-lang="en">GameScene Hierarchy Tree</span>
                            <span class="card-title" data-lang="ja">GameScene ヒエラルキーツリー</span>
                            <div class="card-toggle">&#9660;</div>
                        </div>
                        <div class="card-body">
<pre>GameScene
|-- Main Camera
|-- GameManager                    <span style="color:var(--text-muted)"># Singleton, DontDestroyOnLoad</span>
|
|-- GameRoot
|   |-- GridManager                <span style="color:var(--text-muted)"># 20x20 网格管理器</span>
|   |   |-- Pixel_Cell (x400)      <span style="color:var(--text-muted)"># 方块实例</span>
|   |
|   |-- BeltPathHolder             <span style="color:var(--text-muted)"># 传送带路径 (4个角点)</span>
|   |   |-- Waypoint_0             <span style="color:var(--text-muted)"># 左下</span>
|   |   |-- Waypoint_1             <span style="color:var(--text-muted)"># 右下</span>
|   |   |-- Waypoint_2             <span style="color:var(--text-muted)"># 右上</span>
|   |   |-- Waypoint_3             <span style="color:var(--text-muted)"># 左上</span>
|   |
|   |-- ReadyQueueManager          <span style="color:var(--text-muted)"># 准备队列 (5槽位)</span>
|   |   |-- Slot_0 ~ Slot_4
|   |
|   |-- ShooterTableManager        <span style="color:var(--text-muted)"># 备战台 (5列x6行)</span>
|       |-- Pig_Shooter (动态生成)
|
|-- Canvas
    |-- Top                        <span style="color:var(--text-muted)"># 顶部UI (关卡显示)</span>
    |-- Popup_GameResult           <span style="color:var(--text-muted)"># 结果弹窗</span>
        |-- WindowContainer
        |-- BtnRetry / BtnMenu / BtnNext</pre>
                        </div>
                    </div>
                </section>

                <!-- Section 4: Core Scripts -->
                <section class="section" id="core">
                    <div class="section-header">
                        <div class="section-num">4</div>
                        <h2 class="section-title" data-lang="zh">核心系统</h2>
                        <h2 class="section-title" data-lang="en">Core Systems</h2>
                        <h2 class="section-title" data-lang="ja">コアシステム</h2>
                    </div>

                    <!-- GameManager -->
                    <div class="card">
                        <div class="card-header" onclick="toggleCard(this)">
                            <div class="card-title-group">
                                <span class="tag tag-singleton">Singleton</span>
                                <span class="card-title">GameManager</span>
                                <span class="card-path">Scripts/GameManager.cs</span>
                            </div>
                            <div class="card-toggle">&#9660;</div>
                        </div>
                        <div class="card-body">
                            <p data-lang="zh" style="color: var(--text-secondary); margin-bottom: 16px;">全局游戏管理器，使用 DontDestroyOnLoad 跨场景持久化。负责关卡状态、场景切换、JSON数据加载和游戏结束触发。</p>
                            <p data-lang="en" style="color: var(--text-secondary); margin-bottom: 16px;">Global game state manager persisting across scenes via DontDestroyOnLoad. Handles level state, scene transitions, JSON loading, and game over triggers.</p>
                            <p data-lang="ja" style="color: var(--text-secondary); margin-bottom: 16px;">DontDestroyOnLoadでシーン間で永続化するグローバルゲームステートマネージャー。</p>
                            <table>
                                <tr><th>Property</th><th>Type</th><th data-lang="zh">说明</th><th data-lang="en">Description</th><th data-lang="ja">説明</th></tr>
                                <tr><td>Instance</td><td>static</td><td data-lang="zh">单例实例</td><td data-lang="en">Singleton instance</td><td data-lang="ja">シングルトン</td></tr>
                                <tr><td>currentLevelName</td><td>string</td><td data-lang="zh">当前关卡ID (如 "Level_1")</td><td data-lang="en">Current level ID (e.g., "Level_1")</td><td data-lang="ja">現在レベルID</td></tr>
                            </table>
                            <ul class="method-list">
                                <li class="method-item">
                                    <span class="method-name">StartLevel(string levelName)</span>
                                    <div class="method-desc" data-lang="zh">设置 currentLevelName 并加载 GameScene</div>
                                    <div class="method-desc" data-lang="en">Sets currentLevelName and loads GameScene</div>
                                    <div class="method-desc" data-lang="ja">currentLevelNameを設定しGameSceneをロード</div>
                                </li>
                                <li class="method-item">
                                    <span class="method-name">LoadNextLevel()</span>
                                    <div class="method-desc" data-lang="zh">进入下一关，如果不存在则返回菜单</div>
                                    <div class="method-desc" data-lang="en">Advances to next level or returns to menu if none exists</div>
                                    <div class="method-desc" data-lang="ja">次のレベルに進む、存在しない場合はメニューに戻る</div>
                                </li>
                                <li class="method-item">
                                    <span class="method-name">GameOver(bool isWin)</span>
                                    <div class="method-desc" data-lang="zh">触发胜利(true)或失败(false)弹窗</div>
                                    <div class="method-desc" data-lang="en">Triggers victory (true) or game over (false) popup</div>
                                    <div class="method-desc" data-lang="ja">勝利(true)またはゲームオーバー(false)ポップアップをトリガー</div>
                                </li>
                                <li class="method-item">
                                    <span class="method-name">LoadGridData() : LevelGridData</span>
                                    <div class="method-desc" data-lang="zh">从 Resources/Levels/{currentLevelName}_grid.json 加载网格数据</div>
                                    <div class="method-desc" data-lang="en">Loads grid JSON from Resources/Levels/</div>
                                    <div class="method-desc" data-lang="ja">Resources/Levels/からグリッドJSONをロード</div>
                                </li>
                                <li class="method-item">
                                    <span class="method-name">LoadTableData() : ShooterTableData</span>
                                    <div class="method-desc" data-lang="zh">从 Resources/Levels/{currentLevelName}_table.json 加载射手表数据</div>
                                    <div class="method-desc" data-lang="en">Loads shooter table JSON from Resources/Levels/</div>
                                    <div class="method-desc" data-lang="ja">Resources/Levels/からシューターテーブルJSONをロード</div>
                                </li>
                                <li class="method-item">
                                    <span class="method-name">AdvanceLevelProgress() : bool</span>
                                    <div class="method-desc" data-lang="zh">只更新 currentLevelName+1，不切换场景。用于胜利后返回菜单时更新进度</div>
                                    <div class="method-desc" data-lang="en">Updates currentLevelName+1 without scene change. Used for menu return after victory</div>
                                    <div class="method-desc" data-lang="ja">シーン遷移なしでcurrentLevelName+1を更新</div>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- GridManager -->
                    <div class="card">
                        <div class="card-header" onclick="toggleCard(this)">
                            <div class="card-title-group">
                                <span class="tag tag-singleton">Singleton</span>
                                <span class="card-title">GridManager</span>
                                <span class="card-path">Scripts/GameScene/GridManager.cs</span>
                            </div>
                            <div class="card-toggle">&#9660;</div>
                        </div>
                        <div class="card-body">
                            <p data-lang="zh" style="color: var(--text-secondary); margin-bottom: 16px;">网格系统核心，负责20x20方块网格的生成、智能目标查找（GetTargetCellSmart）和胜利条件检测。采用 O(1) 二维数组存储。</p>
                            <p data-lang="en" style="color: var(--text-secondary); margin-bottom: 16px;">Core grid system managing 20x20 cell generation, smart target lookup (GetTargetCellSmart), and win condition detection. Uses O(1) 2D array storage.</p>
                            <p data-lang="ja" style="color: var(--text-secondary); margin-bottom: 16px;">20x20セルグリッドの生成、スマートターゲット検索、勝利条件検出を管理するコアグリッドシステム。</p>
                            <table>
                                <tr><th>Property</th><th>Type</th><th data-lang="zh">说明</th><th data-lang="en">Description</th><th data-lang="ja">説明</th></tr>
                                <tr><td>gridSize</td><td>int</td><td data-lang="zh">网格大小 (默认20)</td><td data-lang="en">Grid size (default 20)</td><td data-lang="ja">グリッドサイズ</td></tr>
                                <tr><td>cellSize</td><td>float</td><td data-lang="zh">单格尺寸 (默认1.0)</td><td data-lang="en">Cell size (default 1.0)</td><td data-lang="ja">セルサイズ</td></tr>
                                <tr><td>activeCellCount</td><td>int</td><td data-lang="zh">当前存活方块数，归零触发胜利</td><td data-lang="en">Active cells count, triggers win when 0</td><td data-lang="ja">アクティブセル数</td></tr>
                                <tr><td>logicGrid</td><td>CellController[,]</td><td data-lang="zh">二维数组存储，O(1)访问</td><td data-lang="en">2D array storage, O(1) access</td><td data-lang="ja">2D配列ストレージ</td></tr>
                            </table>
                            <ul class="method-list">
                                <li class="method-item">
                                    <span class="method-name">GetTargetCellSmart(Vector3 shooterPos) : CellController</span>
                                    <div class="method-desc" data-lang="zh"><strong>智能分区查找算法</strong>：根据射手位置判断所在区域(底部/右侧/顶部/左侧)，强制钳制(Clamp)查询范围，解决拐角漏射和边缘盲区问题</div>
                                    <div class="method-desc" data-lang="en"><strong>Smart zone-based lookup</strong>: Determines scan direction based on shooter position (Bottom/Right/Top/Left), clamps query range to fix corner missing shots</div>
                                    <div class="method-desc" data-lang="ja"><strong>スマートゾーンベース検索</strong>：シューター位置に基づいてスキャン方向を決定</div>
                                </li>
                                <li class="method-item">
                                    <span class="method-name">GetSimulatedPosition(int beltIndex) : Vector3</span>
                                    <div class="method-desc" data-lang="zh">传送带步数索引(0-79)转世界坐标。用于预计算射击路径<br>0~19=底部, 20~39=右侧, 40~59=顶部, 60~79=左侧</div>
                                    <div class="method-desc" data-lang="en">Converts belt step index (0-79) to world position for path pre-calculation<br>0~19=Bottom, 20~39=Right, 40~59=Top, 60~79=Left</div>
                                    <div class="method-desc" data-lang="ja">ベルトステップインデックス(0-79)をワールド座標に変換</div>
                                </li>
                                <li class="method-item">
                                    <span class="method-name">OnCellDestroyed()</span>
                                    <div class="method-desc" data-lang="zh">方块销毁回调，activeCellCount--。归零时触发 GameManager.GameOver(true)</div>
                                    <div class="method-desc" data-lang="en">Cell destruction callback, decrements activeCellCount. Triggers GameOver(true) when 0</div>
                                    <div class="method-desc" data-lang="ja">セル破壊コールバック、activeCellCountをデクリメント</div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Section 5: Gameplay Scripts -->
                <section class="section" id="gameplay">
                    <div class="section-header">
                        <div class="section-num">5</div>
                        <h2 class="section-title" data-lang="zh">游戏逻辑</h2>
                        <h2 class="section-title" data-lang="en">Gameplay</h2>
                        <h2 class="section-title" data-lang="ja">ゲームプレイ</h2>
                    </div>

                    <!-- PigController -->
                    <div class="card">
                        <div class="card-header" onclick="toggleCard(this)">
                            <div class="card-title-group">
                                <span class="tag tag-component">Component</span>
                                <span class="card-title">PigController</span>
                                <span class="card-path">Scripts/GameScene/PigController.cs</span>
                            </div>
                            <div class="card-toggle">&#9660;</div>
                        </div>
                        <div class="card-body">
                            <p data-lang="zh" style="color: var(--text-secondary); margin-bottom: 16px;"><strong>核心射手控制器 (721行)</strong>：整合状态管理、预计算射击、传送带巡逻和绝地反击机制。采用协程驱动的事件流架构。</p>
                            <p data-lang="en" style="color: var(--text-secondary); margin-bottom: 16px;"><strong>Core shooter controller (721 lines)</strong>: Integrates state management, pre-calculated shooting, belt patrol, and "last stand" mechanics. Uses coroutine-driven event flow.</p>
                            <p data-lang="ja" style="color: var(--text-secondary); margin-bottom: 16px;"><strong>コアシューターコントローラー(721行)</strong>：状態管理、事前計算ショット、ベルトパトロール、ラストスタンドを統合。</p>
                            
                            <h4 class="subsection" data-lang="zh">状态机 (PigState)</h4>
                            <h4 class="subsection" data-lang="en">State Machine (PigState)</h4>
                            <h4 class="subsection" data-lang="ja">状態マシン (PigState)</h4>
<pre>InTable       -> InQueue       -> OnBelt        -> Returning -> InQueue (循环)
(备战台)         (准备队列)        (传送带巡逻)      (返回中)
   |              |                  |
   |              |                  v  (如果 Table & Queue 都空)
   |              |            AutoRejoinBelt (绝地反击, 2x速度)
   |              |
   +-- 点击 ------+-- 点击 -------> GoToBelt() -> PreCalculatePath() -> RunBeltSequence()</pre>
                            
                            <h4 class="subsection" data-lang="zh">核心算法: PreCalculatePath()</h4>
                            <h4 class="subsection" data-lang="en">Core Algorithm: PreCalculatePath()</h4>
                            <h4 class="subsection" data-lang="ja">コアアルゴリズム: PreCalculatePath()</h4>
                            <p data-lang="zh" style="color: var(--text-secondary); margin-bottom: 12px;">在上传送带前，模拟整个传送带路径(80步)，预计算所有射击点，生成"射击排期表"(shotSchedule Queue)。</p>
                            <p data-lang="en" style="color: var(--text-secondary); margin-bottom: 12px;">Before entering belt, simulates entire belt path (80 steps), pre-calculates all shot points, generates "shot schedule" queue.</p>
                            <p data-lang="ja" style="color: var(--text-secondary); margin-bottom: 12px;">ベルト進入前に80ステップのベルトパスをシミュレートし、すべてのショットポイントを事前計算。</p>
<pre>for (int i = 0; i < 80; i++) {
    Vector3 simPos = GridManager.GetSimulatedPosition(i);
    CellController target = GridManager.GetTargetCellSmart(simPos);
    
    if (target != null 
        && !target.isDestroyed           // 未被销毁
        && !target.isPendingDeath        // 未被其他射击占位
        && target.colorID == this.colorID) // 颜色匹配
    {
        shotSchedule.Enqueue({i, target});
        target.isPendingDeath = true;    // 标记占位,避免重复瞄准
        simulatedAmmo--;
    }
}</pre>
                            
                            <ul class="method-list">
                                <li class="method-item">
                                    <span class="method-name">MoveToQueue(int slotIndex, Vector3 pos)</span>
                                    <div class="method-desc" data-lang="zh">从备战台移动到队列指定槽位，更新状态为 InQueue</div>
                                    <div class="method-desc" data-lang="en">Moves from table to specified queue slot, sets state to InQueue</div>
                                    <div class="method-desc" data-lang="ja">テーブルから指定キュースロットに移動、状態をInQueueに設定</div>
                                </li>
                                <li class="method-item">
                                    <span class="method-name">GoToBelt()</span>
                                    <div class="method-desc" data-lang="zh">从队列进入传送带：注销队列 -> PreCalculatePath() -> RunBeltSequence()</div>
                                    <div class="method-desc" data-lang="en">Enters belt from queue: unregister -> PreCalculatePath() -> RunBeltSequence()</div>
                                    <div class="method-desc" data-lang="ja">キューからベルトに進入：登録解除 -> PreCalculatePath() -> RunBeltSequence()</div>
                                </li>
                                <li class="method-item">
                                    <span class="method-name">IEnumerator RunBeltSequence(List&lt;Transform&gt; path)</span>
                                    <div class="method-desc" data-lang="zh">主巡逻协程：飞向起点 -> 遍历4条边 -> 按排期表射击 -> 检测弹药归零 -> CheckEndGameAndReturn()</div>
                                    <div class="method-desc" data-lang="en">Main patrol coroutine: fly to start -> traverse 4 edges -> fire per schedule -> check ammo -> CheckEndGameAndReturn()</div>
                                    <div class="method-desc" data-lang="ja">メインパトロールコルーチン：開始点へ飛ぶ -> 4辺を走査 -> スケジュールに従って発射</div>
                                </li>
                                <li class="method-item">
                                    <span class="method-name">IEnumerator AutoRejoinBelt()</span>
                                    <div class="method-desc" data-lang="zh"><strong>绝地反击</strong>：回弹到队列位置 -> isBoosted=true(2x速度) -> 重新 PreCalculatePath() -> 再次 RunBeltSequence()</div>
                                    <div class="method-desc" data-lang="en"><strong>Last Stand</strong>: bounce to queue -> isBoosted=true (2x speed) -> re-PreCalculatePath() -> RunBeltSequence() again</div>
                                    <div class="method-desc" data-lang="ja"><strong>ラストスタンド</strong>：キューにバウンス -> isBoosted=true(2x速度) -> 再度RunBeltSequence()</div>
                                </li>
                                <li class="method-item">
                                    <span class="method-name">IEnumerator PerformDeathAnimation()</span>
                                    <div class="method-desc" data-lang="zh">0.3秒死亡动画：膨胀+顺时针旋转(0~0.15s) -> 收缩+逆时针旋转(0.15~0.3s) -> Destroy</div>
                                    <div class="method-desc" data-lang="en">0.3s death animation: expand+clockwise rotate (0~0.15s) -> shrink+counter-clockwise (0.15~0.3s) -> Destroy</div>
                                    <div class="method-desc" data-lang="ja">0.3秒死亡アニメーション：膨張+時計回り回転 -> 収縮+反時計回り回転 -> Destroy</div>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="grid-2">
                        <!-- ReadyQueueManager -->
                        <div class="card">
                            <div class="card-header" onclick="toggleCard(this)">
                                <div class="card-title-group">
                                    <span class="tag tag-singleton">Singleton</span>
                                    <span class="card-title">ReadyQueueManager</span>
                                </div>
                                <div class="card-toggle">&#9660;</div>
                            </div>
                            <div class="card-body">
                                <p class="card-path" style="margin-bottom: 12px;">Scripts/GameScene/ReadyQueueManager.cs</p>
                                <p data-lang="zh" style="color: var(--text-secondary);">管理5个射手准备位(slots)的占用状态。采用 <strong>Shift Left 算法</strong>实现射手离开后的自动左移补位。</p>
                                <p data-lang="en" style="color: var(--text-secondary);">Manages 5 ready slots. Uses <strong>Shift Left algorithm</strong> for auto-filling when a shooter leaves.</p>
                                <p data-lang="ja" style="color: var(--text-secondary);">5つの待機スロットを管理。<strong>Shift Leftアルゴリズム</strong>で自動補填。</p>
                                <ul class="method-list" style="margin-top:12px">
                                    <li class="method-item"><span class="method-name">GetFirstEmptyIndex() : int</span><div class="method-desc">返回第一个空槽位索引，满则返回-1</div></li>
                                    <li class="method-item"><span class="method-name">RegisterPig(int, PigController)</span><div class="method-desc">注册射手到指定槽位</div></li>
                                    <li class="method-item"><span class="method-name">UnregisterPig(PigController)</span><div class="method-desc">注销并自动 Shift Left 补位</div></li>
                                    <li class="method-item"><span class="method-name">IsFull() : bool</span><div class="method-desc">队列是否已满(失败条件检测)</div></li>
                                </ul>
                            </div>
                        </div>

                        <!-- ShooterTableManager -->
                        <div class="card">
                            <div class="card-header" onclick="toggleCard(this)">
                                <div class="card-title-group">
                                    <span class="tag tag-singleton">Singleton</span>
                                    <span class="card-title">ShooterTableManager</span>
                                </div>
                                <div class="card-toggle">&#9660;</div>
                            </div>
                            <div class="card-body">
                                <p class="card-path" style="margin-bottom: 12px;">Scripts/GameScene/ShooterTableManager.cs</p>
                                <p data-lang="zh" style="color: var(--text-secondary);">射手备战台管理器(5列x6行)。从JSON加载并生成射手，采用 <strong>List&lt;List&gt;</strong> 嵌套结构实现"下层自动顶上"的堆栈效果。</p>
                                <p data-lang="en" style="color: var(--text-secondary);">Shooter table manager (5 cols x 6 rows). Loads from JSON, uses <strong>List&lt;List&gt;</strong> for stack-like "bottom auto-rise" effect.</p>
                                <p data-lang="ja" style="color: var(--text-secondary);">シューターテーブルマネージャー(5列x6行)。</p>
                                <ul class="method-list" style="margin-top:12px">
                                    <li class="method-item"><span class="method-name">OnPigClicked(PigController)</span><div class="method-desc">点击最上层射手，移动到队列并补位</div></li>
                                    <li class="method-item"><span class="method-name">IsTableEmpty() : bool</span><div class="method-desc">备战台是否清空(绝地反击条件)</div></li>
                                </ul>
                            </div>
                        </div>

                        <!-- BeltWalker -->
                        <div class="card">
                            <div class="card-header" onclick="toggleCard(this)">
                                <div class="card-title-group">
                                    <span class="tag tag-component">Component</span>
                                    <span class="card-title">BeltWalker</span>
                                </div>
                                <div class="card-toggle">&#9660;</div>
                            </div>
                            <div class="card-body">
                                <p class="card-path" style="margin-bottom: 12px;">Scripts/GameScene/BeltWalker.cs</p>
                                <p data-lang="zh" style="color: var(--text-secondary);">传送带行走组件，沿路径点自动移动和转向。支持 <strong>SetDoubleSpeed()</strong> 实现绝地反击2倍速。</p>
                                <p data-lang="en" style="color: var(--text-secondary);">Belt walking component, auto-moves along waypoints. Supports <strong>SetDoubleSpeed()</strong> for last stand 2x speed.</p>
                                <p data-lang="ja" style="color: var(--text-secondary);">ベルト歩行コンポーネント、ウェイポイントに沿って自動移動。</p>
                                <ul class="method-list" style="margin-top:12px">
                                    <li class="method-item"><span class="method-name">BeginJourney(List&lt;Transform&gt;)</span><div class="method-desc">开始沿路径移动</div></li>
                                    <li class="method-item"><span class="method-name">OnPathComplete : UnityEvent</span><div class="method-desc">路径完成事件回调</div></li>
                                </ul>
                            </div>
                        </div>

                        <!-- BulletController -->
                        <div class="card">
                            <div class="card-header" onclick="toggleCard(this)">
                                <div class="card-title-group">
                                    <span class="tag tag-component">Component</span>
                                    <span class="card-title">BulletController</span>
                                </div>
                                <div class="card-toggle">&#9660;</div>
                            </div>
                            <div class="card-body">
                                <p class="card-path" style="margin-bottom: 12px;">Scripts/GameScene/BulletController.cs</p>
                                <p data-lang="zh" style="color: var(--text-secondary);">子弹飞行控制器，采用<strong>距离检测</strong>替代物理碰撞(高性能)。命中后调用 target.OnHit() 并自毁。</p>
                                <p data-lang="en" style="color: var(--text-secondary);">Bullet controller using <strong>distance detection</strong> instead of physics collision. Calls target.OnHit() and self-destructs on hit.</p>
                                <p data-lang="ja" style="color: var(--text-secondary);">距離検出を使用する弾丸コントローラー。</p>
                            </div>
                        </div>

                        <!-- CellController -->
                        <div class="card">
                            <div class="card-header" onclick="toggleCard(this)">
                                <div class="card-title-group">
                                    <span class="tag tag-component">Component</span>
                                    <span class="card-title">CellController</span>
                                </div>
                                <div class="card-toggle">&#9660;</div>
                            </div>
                            <div class="card-body">
                                <p class="card-path" style="margin-bottom: 12px;">Scripts/GameScene/CellController.cs</p>
                                <p data-lang="zh" style="color: var(--text-secondary);">单个方块控制器。<strong>isPendingDeath</strong> 占位标记用于预计算避免重复瞄准。销毁时通知 GridManager 更新计数。</p>
                                <p data-lang="en" style="color: var(--text-secondary);">Single cell controller. <strong>isPendingDeath</strong> flag for pre-calculation to avoid duplicate targeting. Notifies GridManager on destruction.</p>
                                <p data-lang="ja" style="color: var(--text-secondary);">単一セルコントローラー。isPendingDeathフラグで重複ターゲットを回避。</p>
                            </div>
                        </div>

                        <!-- BeltPathHolder -->
                        <div class="card">
                            <div class="card-header" onclick="toggleCard(this)">
                                <div class="card-title-group">
                                    <span class="tag tag-singleton">Singleton</span>
                                    <span class="card-title">BeltPathHolder</span>
                                </div>
                                <div class="card-toggle">&#9660;</div>
                            </div>
                            <div class="card-body">
                                <p class="card-path" style="margin-bottom: 12px;">Scripts/GameScene/BeltPathHolder.cs</p>
                                <p data-lang="zh" style="color: var(--text-secondary);">传送带路径数据容器，存储4个角点(waypoints)。在Inspector中拖拽配置，全局单例访问。</p>
                                <p data-lang="en" style="color: var(--text-secondary);">Belt path data container with 4 corner waypoints. Drag-and-drop config in Inspector, global singleton access.</p>
                                <p data-lang="ja" style="color: var(--text-secondary);">4つのコーナーウェイポイントを持つベルトパスデータコンテナ。</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Section 6: UI Scripts -->
                <section class="section" id="ui">
                    <div class="section-header">
                        <div class="section-num">6</div>
                        <h2 class="section-title" data-lang="zh">UI 组件</h2>
                        <h2 class="section-title" data-lang="en">UI Components</h2>
                        <h2 class="section-title" data-lang="ja">UIコンポーネント</h2>
                    </div>
                    <div class="grid-2">
                        <div class="card">
                            <div class="card-header" onclick="toggleCard(this)">
                                <div class="card-title-group">
                                    <span class="tag tag-ui">UI</span>
                                    <span class="card-title">GameResultPopup</span>
                                </div>
                                <div class="card-toggle">&#9660;</div>
                            </div>
                            <div class="card-body">
                                <p class="card-path" style="margin-bottom: 12px;">Scripts/UIScripts/GameResultPopup.cs</p>
                                <p data-lang="zh" style="color: var(--text-secondary);">胜利/失败结果弹窗。使用 <strong>AnimationCurve</strong> 实现弹性弹出动画，<strong>Time.unscaledDeltaTime</strong> 确保 timeScale=0 时动画正常。</p>
                                <p data-lang="en" style="color: var(--text-secondary);">Victory/GameOver popup. Uses <strong>AnimationCurve</strong> for pop animation, <strong>Time.unscaledDeltaTime</strong> for timeScale=0 compatibility.</p>
                                <p data-lang="ja" style="color: var(--text-secondary);">勝利/ゲームオーバーポップアップ。AnimationCurveでポップアニメーション。</p>
                                <ul class="method-list" style="margin-top:12px">
                                    <li class="method-item"><span class="method-name">ShowVictory()</span><div class="method-desc">显示胜利弹窗(Next+Menu按钮)</div></li>
                                    <li class="method-item"><span class="method-name">ShowGameOverDelayed()</span><div class="method-desc">延迟0.1s显示失败弹窗(Retry+Menu按钮)</div></li>
                                    <li class="method-item"><span class="method-name">IEnumerator PopAnimation()</span><div class="method-desc">弹出动画：0->1.1->1 缩放曲线</div></li>
                                </ul>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header" onclick="toggleCard(this)">
                                <div class="card-title-group">
                                    <span class="tag tag-ui">UI</span>
                                    <span class="card-title">SceneFader / SplashController</span>
                                </div>
                                <div class="card-toggle">&#9660;</div>
                            </div>
                            <div class="card-body">
                                <p data-lang="zh" style="color: var(--text-secondary);">场景过渡动画和启动画面控制。SceneFader 实现淡入淡出，SplashController 控制 Logo 显示时间后自动跳转。</p>
                                <p data-lang="en" style="color: var(--text-secondary);">Scene transition and splash screen. SceneFader handles fade in/out, SplashController manages logo display before auto-transition.</p>
                                <p data-lang="ja" style="color: var(--text-secondary);">シーン遷移とスプラッシュスクリーン。</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Section 7: Data -->
                <section class="section" id="data">
                    <div class="section-header">
                        <div class="section-num">7</div>
                        <h2 class="section-title" data-lang="zh">数据结构与工具</h2>
                        <h2 class="section-title" data-lang="en">Data Structures & Tools</h2>
                        <h2 class="section-title" data-lang="ja">データ構造とツール</h2>
                    </div>

                    <div class="card">
                        <div class="card-header" onclick="toggleCard(this)">
                            <div class="card-title-group">
                                <span class="tag tag-data">Data</span>
                                <span class="card-title" data-lang="zh">JSON 数据结构</span>
                                <span class="card-title" data-lang="en">JSON Data Structures</span>
                                <span class="card-title" data-lang="ja">JSONデータ構造</span>
                            </div>
                            <div class="card-toggle">&#9660;</div>
                        </div>
                        <div class="card-body">
                            <div class="grid-2">
                                <div>
                                    <h4 style="margin-bottom:8px">Level_X_grid.json</h4>
<pre>{
  "cells": [
    {"x": 0, "y": 0, "color": "red"},
    {"x": 0, "y": 1, "color": "blue"},
    // ... 共400个方块 (20x20)
  ]
}</pre>
                                </div>
                                <div>
                                    <h4 style="margin-bottom:8px">Level_X_table.json</h4>
<pre>{
  "columns": [
    {"shooters": [
      {"color": "red", "ammo": 25},
      {"color": "blue", "ammo": 30}
    ]},
    // ... 共5列
  ]
}</pre>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header" onclick="toggleCard(this)">
                            <div class="card-title-group">
                                <span class="tag tag-editor">Editor</span>
                                <span class="card-title">LevelDataGenerator</span>
                                <span class="card-path">Scripts/Level/LevelDataGenerator.cs</span>
                            </div>
                            <div class="card-toggle">&#9660;</div>
                        </div>
                        <div class="card-body">
                            <p data-lang="zh" style="color: var(--text-secondary); margin-bottom: 16px;">编辑器关卡生成工具。右键组件 → <strong>[ContextMenu] Generate All 10 Levels</strong>。自动保证每关射手弹药总和 = 方块颜色总和。</p>
                            <p data-lang="en" style="color: var(--text-secondary); margin-bottom: 16px;">Editor level generation tool. Right-click → <strong>[ContextMenu] Generate All 10 Levels</strong>. Auto-balances shooter ammo = cell color counts.</p>
                            <p data-lang="ja" style="color: var(--text-secondary); margin-bottom: 16px;">エディタレベル生成ツール。右クリック → Generate All 10 Levels。</p>
                            <table>
                                <tr><th>Level</th><th>Pattern</th><th>Level</th><th>Pattern</th></tr>
                                <tr><td>1</td><td>Border + X diagonal</td><td>6</td><td>Circles</td></tr>
                                <tr><td>2</td><td>Concentric squares</td><td>7</td><td>Diagonal stripes</td></tr>
                                <tr><td>3</td><td>Checkerboard</td><td>8</td><td>Quadrants</td></tr>
                                <tr><td>4</td><td>Stripes</td><td>9</td><td>Radial</td></tr>
                                <tr><td>5</td><td>Spiral</td><td>10</td><td>Maze</td></tr>
                            </table>
                        </div>
                    </div>
                </section>
            </div>
            <footer class="footer">
                <p data-lang="zh">PixelFlow 技术文档 | <a href="https://github.com/NewbieAudioKid/PixU3D_bottomup">GitHub</a></p>
                <p data-lang="en">PixelFlow Documentation | <a href="https://github.com/NewbieAudioKid/PixU3D_bottomup">GitHub</a></p>
                <p data-lang="ja">PixelFlow ドキュメント | <a href="https://github.com/NewbieAudioKid/PixU3D_bottomup">GitHub</a></p>
            </footer>
        </main>
    </div>
    <script>
        function toggleCard(header) { header.parentElement.classList.toggle('open'); }
        function setLang(lang) {
            document.body.className = 'lang-' + lang;
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector('.lang-btn[onclick="setLang(\'' + lang + '\')"]').classList.add('active');
            localStorage.setItem('pixelflow-lang', lang);
        }
        const savedLang = localStorage.getItem('pixelflow-lang');
        if (savedLang) setLang(savedLang);
    </script>
</body>
</html>
